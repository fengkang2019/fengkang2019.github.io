{"version":3,"sources":["scripts/views/usermanege/index.js"],"names":["Select","Option","ResizeableTitle","props","onResize","width","restProps","height","draggableOpts","enableUserSelectHack","warning","message","UserManage","connect","state","staffs","getIn","components","header","cell","handleResize","index","e","size","setState","columns","nextColumns","changeBg","p","target","parentNode","childNodes","i","length","className","part","innerHTML","dispatch","getStaffs","url","params","txt","findStaff","keyword","search","value","showDrawer","visible","onClose","submitMsg","name","one","sex","two","age","three","four","tel","five","salary","six","entrytime","seven","eight","title","dataIndex","this","data","console","log","style","textAlign","fontSize","onClick","textIndent","color","type","ref","el","placeholder","id","bordered","dataSource","backgroundColor","keyboard","placement","closable","simple","defaultCurrent","total","defaultPageSize","Component"],"mappings":"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","file":"static/js/20.cc4a0215.chunk.js","sourcesContent":["\r\n\r\n\r\n\r\nimport \"./index.scss\";\r\n\r\nimport { Button, Pagination, Drawer, message, Table,Select  } from \"antd\";\r\nimport { HashRouter as Hash, BrowserRouter, Route, Switch, Link, NavLink, Redirect } from \"react-router-dom\";\r\nimport { Resizable } from 'react-resizable';\r\nimport { connect } from \"react-redux\";\r\nimport { getStaffs } from \"../../../immutable/actions\";\r\nconst { Option } = Select;\r\nconst ResizeableTitle = props => {\r\n    const { onResize, width, ...restProps } = props;\r\n\r\n    if (!width) {\r\n        return <th {...restProps} />;\r\n    }\r\n\r\n    return (\r\n        <Resizable\r\n            width={width}\r\n            height={0}\r\n            onResize={onResize}\r\n            draggableOpts={{ enableUserSelectHack: false }}\r\n        >\r\n            <th {...restProps} />\r\n        </Resizable>\r\n    );\r\n};\r\n\r\nconst warning = () => {\r\n    message.warning('请填写完整员工信息');\r\n};\r\n@connect(\r\n    state => (\r\n        {\r\n            staffs: state.getIn(['staff', \"staffs\"]),\r\n        }\r\n    )\r\n)\r\nexport default class UserManage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            txt: \"全部员工\",\r\n            columns: [\r\n                {\r\n                    title: '姓名',\r\n                    dataIndex: 'name',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '性别',\r\n                    dataIndex: 'sex',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '年龄',\r\n                    dataIndex: 'age',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '部门',\r\n                    dataIndex: 'part',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '学历',\r\n                    dataIndex: 'education',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '电话',\r\n                    dataIndex: 'tel',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '薪资',\r\n                    dataIndex: 'salary',\r\n                    width: 100,\r\n                },\r\n                {\r\n                    title: '入职时间',\r\n                    dataIndex: 'entrytime',\r\n                    width: 100,\r\n                },\r\n            ],\r\n        }\r\n    }\r\n    components = {\r\n        header: {\r\n            cell: ResizeableTitle,\r\n        },\r\n    };\r\n\r\n    handleResize = index => (e, { size }) => {\r\n        this.setState(({ columns }) => {\r\n            const nextColumns = [...columns];\r\n            nextColumns[index] = {\r\n                ...nextColumns[index],\r\n                width: size.width,\r\n            };\r\n            return { columns: nextColumns };\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (!this.props.staffs.length) {\r\n            this.props.dispatch(getStaffs({\r\n                url: \"/react/getStaff\"\r\n            }))\r\n        }\r\n    }\r\n    changeBg = (e) => {\r\n        let p = e.target.parentNode.childNodes\r\n        for (let i = 0; i < p.length; i++) {\r\n            p[i].className = \"\";\r\n        }\r\n        e.target.className = \"active\"\r\n        let part = e.target.innerHTML;\r\n\r\n        this.props.dispatch(getStaffs({\r\n            url: \"/react/getStaff\",\r\n            params: {\r\n                part,\r\n            }\r\n        }))\r\n        this.setState({\r\n            txt: part,\r\n        })\r\n    }\r\n    findStaff = () => {\r\n\r\n        let keyword = this.search.value;\r\n\r\n        this.props.dispatch(getStaffs({\r\n            url: \"/react/getStaff\",\r\n            params: {\r\n                keyword,\r\n            }\r\n        }))\r\n\r\n    }\r\n    showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    onClose = () => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n    submitMsg = () => {\r\n        const name = this.one.value;\r\n        const sex = this.two.value;\r\n        const age = this.three.value;\r\n        const part = this.four.value;\r\n        const tel = this.five.value;\r\n        const salary = this.six.value;\r\n        const entrytime = this.seven.value;\r\n        const state = this.eight.value;\r\n        if (name && sex && age && part && tel && salary && entrytime && state) {\r\n            this.props.dispatch(getStaffs({\r\n                url: \"/react/addStaff\",\r\n                params: {\r\n                    name,\r\n                    sex,\r\n                    age,\r\n                    part,\r\n                    tel,\r\n                    salary,\r\n                    entrytime,\r\n                    state,\r\n                }\r\n            }))\r\n        } else {\r\n            warning()\r\n        }\r\n\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    }\r\n    render() {\r\n        const { staffs } = this.props;\r\n\r\n        let data = [...staffs];\r\n        data.state = data.state ? \"离职\" : \"在职\";\r\n\r\n        console.log(data.state)\r\n\r\n        const { txt, columns } = this.state;\r\n        return (\r\n            <div className=\"user\">\r\n                <div className=\"userleft\">\r\n                    <ul>\r\n                        <li style={{ textAlign: \"center\", fontSize: \"18px\" }}>全部部门</li>\r\n                        <li onClick={this.changeBg}>\r\n                            <p>产品</p>\r\n                            <p>销售</p>\r\n                            <p>人事</p>\r\n                            <p>会计</p>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"userright\">\r\n                    <ul>\r\n                        <li style={{ textIndent: \"2em\", fontSize: \"18px\", color: \"red\" }}>{txt}</li>\r\n                        <li>\r\n                            <input type=\"text\" ref={el => this.search = el} className=\"search\" placeholder=\"请输入搜索内容\" />\r\n                            <Button type=\"primary\" onClick={this.findStaff} className=\"find\">搜索</Button>\r\n                        </li>\r\n                        <li id=\"userLi\">\r\n                            {/* <table cellSpacing={0} cellPadding={0} style={{\r\n                                border: \"1px solid #000\"\r\n                            }}>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>姓名</td>\r\n                                        <td>性别</td>\r\n                                        <td>年龄</td>\r\n                                        <td>部门</td>\r\n                                        <td>电话</td>\r\n                                        <td>薪资</td>\r\n                                        <td>入职时间</td>\r\n                                        <td>状态</td>\r\n                                    </tr>\r\n                                    {\r\n                                        staffs.map((staff, i) => {\r\n                                            return (\r\n                                                <tr key={i}>\r\n                                                    <td>\r\n                                                        {staff.name}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.sex}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.age}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.part}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.tel}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.salary}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.entrytime}\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        {staff.state ? \"已离职\" : \"在职\"}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </tbody>\r\n                            </table> */}\r\n                            <Table bordered components={this.components} columns={columns} dataSource={data} />\r\n                        </li>\r\n                        <li>\r\n                            <Button type=\"primary\" onClick={this.showDrawer}>新增人员</Button>\r\n                            <Drawer\r\n                                style={{\r\n                                    backgroundColor: \"#999\",\r\n                                }}\r\n                                keyboard={true}\r\n                                width=\"30%\"\r\n                                title=\"新增员工\"\r\n                                placement=\"left\"\r\n                                closable={false}\r\n                                onClose={this.onClose}\r\n                                visible={this.state.visible}\r\n                            >\r\n                                <ul className=\"addStaff\">\r\n                                    <li><span>姓名:</span><input type=\"text\" placeholder=\"请输入员工姓名\" ref={el => this.one = el} /></li>\r\n                                    <li><span>性别:</span><input type=\"text\" placeholder=\"请输入员工性别\" ref={el => this.two = el} /></li>\r\n                                    <li><span>年龄:</span><input type=\"text\" placeholder=\"请输入员工年龄\" ref={el => this.three = el} /></li>\r\n                                    <li><span>部门:</span><input type=\"text\" placeholder=\"请输入员工部门\" ref={el => this.four = el} /></li>\r\n                                    <li><span>电话:</span><input type=\"text\" placeholder=\"请输入员工电话\" ref={el => this.five = el} /></li>\r\n                                    <li><span>薪资:</span><input type=\"text\" placeholder=\"请输入员工薪资\" ref={el => this.six = el} /></li>\r\n                                    <li><span>入职时间:</span><input type=\"text\" placeholder=\"请输入员工入职时间\" ref={el => this.seven = el} /></li>\r\n                                    <li><span>状态:</span><input type=\"number\" placeholder=\"0在职，1离职\" ref={el => this.eight = el} /></li>\r\n                                    <li><Button type=\"primary\" onClick={this.submitMsg}>提交员工信息</Button></li>\r\n                                </ul>\r\n                            </Drawer>\r\n                            <Button type=\"primary\">同步人员</Button>\r\n                            <Pagination\r\n                                className=\"page\"\r\n                                simple\r\n                                defaultCurrent={1}\r\n                                total={50}\r\n                                defaultPageSize={10}\r\n                            />\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}"],"sourceRoot":""}